{{- $entries := .Page.Scratch.Get "bib" -}}
{{- if $entries -}}
  {{- $entryMap := dict -}}
  {{- range $idx, $entry := $entries -}}
    {{- $entryMap = merge $entryMap (dict $entry.id $idx) -}}
  {{- end -}}
  {{- $entryIndex := index $entryMap (.Get 0) -}}
  {{- if $entryIndex -}}
  <a href="#ref-{{ .Get 0 }}" class="citation" aria-label="Reference {{ .Get 0 }}">[{{ add $entryIndex 1 }}]</a>
  {{- else -}}
  <span class="citation-error">[Citation Error]</span>
  {{- end -}}
{{- end -}}
